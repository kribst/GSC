{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>

  <link href="{{ base_url }}static/css/bootstrap.min.css" rel="stylesheet">
<link href="{{ base_url }}static/css/rapport.css" rel="stylesheet">

</head>
<body style="font-family: 'Times New Roman', Times, serif;">
<style>

table {
    width: 99.9%;
    table-layout: fixed;
    border-collapse: collapse;
}

table th, table td {
    border:  1px solid #000;
    padding: 5px;
    text-align: center;
    font-size: 9pt; /* Réduire la taille de la police des cellules du tableau */
}

table td {
    word-wrap: break-word; /* Permet aux mots longs de se casser pour ne pas déborder */
}
 </style>


<div class="container mt-5" style="font-family: 'Times New Roman', Times, serif;">
    <header class="text-center mb-4">
        <br>
         <br>
        <div>
            <img src="http://127.0.0.1:8000/static/bc.jpg" alt="">
        </div>

        <br>
          <h5 style="text-align: center; font-size: 2em; text-decoration: underline;">{{ date_string }}</h5>
        <br>
        <h3 style="text-align: center; text-decoration: underline;  font-size: 1.8em;">Objectifs de la semaine</h3>
        <br>

         <div style="white-space: normal; overflow-wrap: break-word; word-wrap: break-word; padding-left: 40px; margin: 0; font-size: 1.4em; text-align: center;">
          <style>
            ul, ol {
              margin: 0;
              padding: 0;
              list-style-position: inside;
              display: inline-block; /* Permet de centrer la liste */
              text-align: left; /* Pour garder le texte de la liste aligné à gauche */
            }
          </style>
          {{ form.objectif|safe }}
        </div>
    </header>

    <section>
                  <h3 style="text-align: center; text-decoration: underline;  font-size: 1.8em;">I)	STATISTIQUES SOMMAIRES DES ACTIVITES</h3>
                  <br>
        <table>
                      <thead>
                          <tr style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                              <th style="align-items: center; text-align: center; border: 1px solid black; 100%;">ACTIVITES</th>
                              <th style="align-items: center; text-align: center; border: 1px solid black; 100%;">QUANTITE</th>
                              <th style="align-items: center; text-align: center; border: 1px solid black; 100%;">NOMBRE DE PERSONNE(S)</th>
                              <th style="align-items: center; text-align: center; border: 1px solid black; 100%;">PERSONNE EN CHARGE</th>
                              <th style="align-items: center; text-align: center; border: 1px solid black; 100%;">POURCENTAGE DE LA CHARGE</th>
                              <th style="align-items: center; text-align: center; border: 1px solid black; 100%;">STATUT DE LA TACHE</th>
                              <th style="align-items: center; text-align: center; border: 1px solid black; 100%;">POURCENTAGE DE CHARGE INDIVIDUEL</th>

                          </tr>
                      </thead>
                      <tbody>
                          <tr style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                              <th style="align-items: center; text-align: center; border: 1px solid black; 100%;">CHARGEMENT DES PRODUITS DANS LE SHEEFT</th>
                            <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.quantite_produit }}
                                  {{ form.quantite_produit.errors }}
                              </td>
                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                   {% for user in nombre_presonne %}
                                      {{ user.username }}{% if not forloop.last %}, {% endif %}
                                  {% endfor %}
                              </td>
                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ usernames_personne_en_charge|join:', ' }}
                              </td>
                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.pourcentage_charge_sheet }} %
                                  {{ form.pourcentage_charge_sheet.errors }}
                              </td>
                            <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.statut_qte_produit_sheet }}
                                  {{ form.statut_qte_produit_sheet.errors }}
                              </td>
                            <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.pourcentage_individuel_quantite_produit }}
                                  {{ form.pourcentage_individuel_quantite_produit.errors }}
                              </td>

                          </tr>


                       <tr style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                              <th style="align-items: center; text-align: center; border: 1px solid black; 100%;">IMPORTATION DES PRODUITS SUR LE SITE</th>

                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.quantite_importer }}
                                  {{ form.quantite_importer.errors }}
                              </td>
                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                 {{ usernames_nombre_presonne_importer|join:', ' }}
                              </td>
                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ usernames_personne_en_charge_importer|join:', ' }}
                              </td>
                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.pourcentage_quantite_importer }} %
                                  {{ form.pourcentage_quantite_importer.errors }}
                              </td>
                            <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.statut_qte_importer_importer }}
                                  {{ form.statut_qte_importer_importer.errors }}
                              </td>
                            <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.pourcentage_individuel_quantite_importer_importer }}
                                  {{ form.pourcentage_individuel_quantite_importer_importer.errors }}
                              </td>

                          </tr>


                       <tr style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                              <th style="align-items: center; text-align: center; border: 1px solid black; 100%;">MONTAGE DES FLYERS ET ANIMATION SUR NOS DIFFERENTES PLATEFORMES</th>
                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.quantite_flyers }}
                                  {{ form.quantite_flyers.errors }}
                              </td>
                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ usernames_nombre_presonne_flyers|join:', ' }}
                              </td>
                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ usernames_personne_en_charge_flyers|join:', ' }}
                              </td>
                              <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.pourcentage_quantite_flyers }} %
                                  {{ form.pourcentage_quantite_flyers.errors }}
                              </td>
                            <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.statut_qte_importer_flyers }}
                                  {{ form.statut_qte_importer_flyers.errors }}
                              </td>
                            <td style="align-items: center; text-align: center; border: 1px solid black; 100%;">
                                  {{ form.pourcentage_individuel_quantite_importer_flyers }}
                                  {{ form.pourcentage_individuel_quantite_importer_flyers.errors }}
                              </td>

                          </tr>
                    {% for subcomptoir in subcomptoirs_data %}
  {% if subcomptoir.activite and subcomptoir.quantite %}
    <tr style="align-items: center; text-align: center; border: 1px solid black; width: 100%;">
      <th style="align-items: center; text-align: center; border: 1px solid black; width: 100%;">{{ subcomptoir.activite }}</th>
      <td style="align-items: center; text-align: center; border: 1px solid black; width: 100%;">
        {{ subcomptoir.quantite }}
      </td>
      <td style="align-items: center; text-align: center; border: 1px solid black; width: 100%;">
         {% for user in subcomptoir.Nombre_de_personne %}
            {{ user }}{% if not forloop.last %}, {% endif %}
    {% endfor %}
      </td>
      <td style="align-items: center; text-align: center; border: 1px solid black; width: 100%;">
        {% for user in subcomptoir.personnes_en_charge %}
          {{ user }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
      </td>
      <td style="align-items: center; text-align: center; border: 1px solid black; width: 100%;">
        {{ subcomptoir.pourcentage_activite }} %
      </td>
      <td style="align-items: center; text-align: center; border: 1px solid black; width: 100%;">
        {{ subcomptoir.statut }}
      </td>
      <td style="align-items: center; text-align: center; border: 1px solid black; width: 100%;">
        {{ subcomptoir.motif }}
      </td>
    </tr>
  {% endif %}
{% endfor %}



                      

                      </tbody>
                  </table>

 <br>
 <div>

    {{ form.autre|safe }}
</div>
        <br>
        <br>
    </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>